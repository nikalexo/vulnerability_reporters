if [[ $* == *-c* ]] 
then
    echo "Start cloning repositories..."
    # Apache
    git clone https://github.com/apache/httpd.git ./../httpd
    # Linux
    git clone https://github.com/torvalds/linux.git ./../linux
    # Mozilla mozilla-central
    git clone https://github.com/mozilla/gecko-dev.git ./../gecko-dev
    # Mozilla comm-central
    git clone https://github.com/mozilla/releases-comm-central.git ./../releases-comm-central
    # PHP
    git clone https://github.com/php/php-src.git ./../php-src

    # clone original mercurial repositories - mozilla
    # Mozilla mozilla-central
    hg clone https://hg.mozilla.org/mozilla-central/ ./../mozilla-central
    # Mozilla comm-central
    hg clone https://hg.mozilla.org/comm-central/ ./../comm-central

    # clone cve-search
    git clone https://github.com/cve-search/cve-search.git ./../cve-search

    # clone linux_kernel_cves
    git clone https://github.com/nluedtke/linux_kernel_cves.git ./../linux_kernel_cves

    # clone mozilla's foundation-security-advidories
    git clone https://github.com/mozilla/foundation-security-advisories.git ./../foundation-security-advisories

    echo "Done"

fi

# Populate cve-search database
if [[ $* == *-d* ]] 
then
    echo "Start populating cve-search database..."
    (cd ./../cve-search/ &&
    git reset --hard e8dd306 &&
    pip install -r requirements.txt &&
    ./sbin/db_mgmt_cpe_dictionary.py -p &&
    ./sbin/db_mgmt_json.py -p &&
    ./sbin/db_updater.py -c && # This will take >45minutes on a decent machine, please be patient
    git reset --hard ce14811)
    echo "Done"
fi

# Update repositories
if [[ $* == *-p* ]] 
then
    echo "Start updating repositories..."
    git -C ./../httpd pull
    git -C ./../linux pull
    git -C ./../gecko-dev pull
    git -C ./../releases-comm-central pull
    git -C ./../php-src pull
    hg pull -R ./../mozilla-central
    hg pull -R ./../comm-central
    git -C ./../cve-search pull
    git -C ./../linux_kernel_cves pull
    git -C ./../foundation-security-advisories pull
    echo "Done"
fi

# Update database of cve-search
if [[ $* == *-u* ]] 
then
    echo "Start updating cve-search database..."
    (cd ./../cve-search/ &&
    git reset --hard e8dd306 &&
    ./../cve-search/sbin/db_updater.py -v &&
    git reset --hard ce14811)
    echo "Done"
fi
